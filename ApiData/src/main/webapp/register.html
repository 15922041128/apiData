<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0038)https://ipcrs.pbccrc.org.cn/userReg.do -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>欢迎使用个人信用信息服务平台</title>
<link rel="stylesheet" type="text/css" href="css/public.css"/>
<link rel="stylesheet" type="text/css" href="css/new.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>
<link rel="stylesheet" type="text/css" href="css/sweetalert/sweetalert.css">
<script type="text/javascript" src="js/pe.js"></script>
<script type="text/javascript" src="js/libs/jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="js/input_notice.js"></script>
<script type="text/javascript" src="js/vcode.js"></script>
<script type="text/javascript" src="js/libs/sweetalert/sweetalert.min.js"></script>
<script>
	onload = function () {
		var container = document.getElementById("vCode");
		var code = new vCode(container);
		document.getElementById("btn").addEventListener("click", function () {
			
			var userName = $('#userName').val();
			var password = $('#password').val();
			var password_confirm = $('#password2').val();
			var compName = $('#compName').val();
			var compTel= $('#compTel').val();
			var contactName = $('#contactName').val();
			var contactTel = $('#contactTel').val();
			
			if (userName=='') {
				swal("用户名不能为空");
				return false;
			}
			
			if (password=='') {
				swal("密码不能为空");
				return false;
			}
			
			if (password!=password_confirm) {
				swal("两次密码必须相同");
				return false;
			}
			
			if (compName=='') {
				swal("公司名称不能为空");
				return false;
			}
			
			if (compTel=='') {
				swal("公司电话不能为空");
				return false;
			}
			
			if (contactName=='') {
				swal("联系人姓名不能为空");
				return false;
			}
			
			if (contactTel=='') {
				swal("联系人电话不能为空");
				return false;
			}
			
			if (code.verify(document.getElementById("code").value)) {
				
				var params = {
								"userName" : userName, 
								"password" : password, 
								"compName" : compName,
								"compTel" : compTel,
								"contactName" : contactName,
								"contactTel" : contactTel};
				
				 $.ajax({
	                async:false,
	                type: "GET",  
	                url: "r/user/register",  
	                data: params,
	                success: function(msg){
	                	alert("注册成功");
	                	parent.$("#conFrame").attr("src", "login.html"); 
	                }  
	            });
				
			} else {
				swal("验证码不正确,请重新输入");
			}
		}, false);
	};
	
	function isExist() {
		
		var userName = $('#userName').val();
		
		var params = {"userName" : userName};
		
		$.ajax({
               async:false,
               type: "GET",  
               url: "r/user/isExist",  
               data: params,
               success: function(msg){
               	if ("Y"==msg) {
               		$("#errMsg").css('display','inline');
               		$('#btn').attr("disabled", true);
               	} else {
               		$("#errMsg").css('display','none');
               		$('#btn').attr("disabled", false); 
               	}
               }  
           });
	}
</script>
<script type="text/javascript">
function displayYesCurrent(obj){
	if($("#errMsg").css("display")=='none') {
		var input = document.getElementById(obj.id);
		input.parentNode.getElementsByTagName("span")[0].style.display = "inline";
		input.parentNode.getElementsByTagName("span")[1].style.display = "none";
	 }
}
</script>
</head>
<body marginwidth="1" marginheight="1">
<div class="gray-bk">
	<div class="white-con">
		<div class="title-1">
			<span>用户注册</span>
		</div>


			<form>
				<div class="table-con" style="width:750px;">
					<ul class="padding_left_40">
						<li class=" height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 帐号：</font>
							<input maxlength="30" id="userName" type="text" class="login_input" onfocus="displayYesCurrent(this)" onblur="displayNo(this);isExist()" autocomplete="off">
							<span class="notice1 span-grey">请输入您的访问帐号</span>
							<span></span>
							<span class="notice1 span-grey" id="errMsg">当前用户已存在</span>
						</li>
						<li class="margin_top_20 height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 密码：</font>
							<input maxlength="18" id="password" type="password" class="login_input" onfocus="displayYes(this)" onblur="displayNo(this);" autocomplete="off">
							<span class="notice1 span-grey">请输入您的密码</span>
							<span></span>
						</li>
						<li class="margin_top_20 height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 密码确认：</font>
							<input maxlength="18" id="password2" type="password" class="login_input" onfocus="displayYes(this)" onblur="displayNo(this);" autocomplete="off">
							<span class="notice1 span-grey">请再次输入您的密码</span>
							<span></span>
						</li>
						<li class="margin_top_20 height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 注册公司 ：</font>
							<input maxlength="18" id="compName" type="text" class="login_input" onfocus="displayYes(this)" onblur="displayNo(this);" autocomplete="off">
							<span class="notice1 span-grey">请填写注册机构名</span>
							<span></span>
						</li>
						<li class="margin_top_20 height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 注册公司电话 ：</font>
							<input maxlength="18" id="compTel" type="text" class="login_input" onfocus="displayYes(this)" onblur="displayNo(this);" autocomplete="off">
							<span class="notice1 span-grey">请填写注册机构电话</span>
							<span></span>
						</li>
						<li class="margin_top_20 height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 联系人 ：</font>
							<input maxlength="18" id="contactName" type="text" class="login_input" onfocus="displayYes(this)" onblur="displayNo(this);" autocomplete="off">
							<span class="notice1 span-grey">请填联系人姓名</span>
							<span></span>
						</li>
						<li class="margin_top_20 height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 联系人电话 ：</font>
							<input maxlength="18" id="contactTel" type="text" class="login_input" onfocus="displayYes(this)" onblur="displayNo(this);" autocomplete="off">
							<span class="notice1 span-grey">请填联系人电话</span>
							<span></span>
						</li>
						<li class="margin_top_20 height32">
							<font class="regist_text span-14"><label class="span-red">
									*
							</label> 验证码 ：</font>
							<input maxlength="18" id="code" type="text" class="login_input" onfocus="displayYes(this)" onblur="displayNo(this);" autocomplete="off">
							<div id="vCode" style="width: 100px; height: 30px; border: 1px solid #ccc; display: inline-block;"></div>
						</li>
						
						<li class="padding_top_30">
							<font class="regist_text">&nbsp;</font>
							<input type="button" class="inputBtn btn2" id="btn" value="注册">
						</li>
					</ul>
				</div>
			</form>
			
		</div>
	</div>
	


<script src="js/inputAutoCompleteOff.js" type="text/javascript"></script>
</body></html>